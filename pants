#!/usr/bin/env bash
# Copyright 2024 Pants project contributors (see CONTRIBUTORS.md).
# Licensed under the Apache License, Version 2.0 (see LICENSE).

# This bootstrap script runs pants using the scie-pants launcher.
# If the launcher is not installed, it will guide the user to install it.

set -euo pipefail

# Try to find pants in the user's PATH or common locations
if command -v pants > /dev/null 2>&1; then
  # pants is in PATH, use it
  exec pants "$@"
elif [ -x "${HOME}/.local/bin/pants" ]; then
  # pants is in ~/.local/bin (default installation location)
  exec "${HOME}/.local/bin/pants" "$@"
else
  # pants launcher is not installed, provide instructions
  echo "Error: pants launcher is not installed." >&2
  echo "" >&2
  echo "To install pants, run:" >&2
  echo "  ./get-pants.sh" >&2
  echo "" >&2
  echo "This will install the pants launcher to ~/.local/bin/pants" >&2
  echo "Make sure ~/.local/bin is in your PATH." >&2
  exit 1
fi
