uses: ./actions/version
id: version

before:
- shell: bash
  run: |
    echo "1.2.3" > VERSION.txt

after:
- shell: bash
  run: |
    VERSION_OUTPUT='${{ steps.version.outputs.version }}'
    if [[ -z "$VERSION_OUTPUT" ]]; then
        echo "fail:Version output is empty" >> "$TEST_OUTPUT"
    else
        echo "success:Version output: $VERSION_OUTPUT" >> "$TEST_OUTPUT"
    fi

    VERSION_VALUE=$(echo "$VERSION_OUTPUT" | jq -r '.version')
    IS_DEV=$(echo "$VERSION_OUTPUT" | jq -r '.is_dev')

    if [[ "$VERSION_VALUE" != "1.2.3" ]]; then
        echo "fail:Expected version '1.2.3', got '$VERSION_VALUE'" >> "$TEST_OUTPUT"
    else
        echo "success:Version value is correct: $VERSION_VALUE" >> "$TEST_OUTPUT"
    fi

    if [[ "$IS_DEV" != "false" ]]; then
        echo "fail:Expected is_dev 'false', got '$IS_DEV'" >> "$TEST_OUTPUT"
    else
        echo "success:is_dev flag is correct: $IS_DEV" >> "$TEST_OUTPUT"
    fi
