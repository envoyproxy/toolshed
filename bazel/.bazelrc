
#############################################################################
# global
#############################################################################

fetch --color=yes
run --color=yes
build --color=yes

common --noenable_bzlmod
common --enable_workspace

## Registries
common --registry=https://bcr.bazel.build/
# TODO(phlax): Add CI to ensure hash is ancestor of `main`
common --registry=https://raw.githubusercontent.com/envoyproxy/toolshed/47e224582d9efe82c17ffdbffee11ed017e23ff1/bazel-registry

common --repo_env=BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=1


#############################################################################
# ci
#############################################################################

common:ci --noshow_progress
common:ci --noshow_loading_progress
common:ci --test_output=errors
build:ci --verbose_failures


#############################################################################
# gcc
#############################################################################

common:gcc --repo_env=BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=0
common:gcc --//compile:use_gcc_toolchain=true


#############################################################################
# macos
#############################################################################

common:macos --repo_env=BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=0


#############################################################################
# imports
#############################################################################

try-import %workspace%/user.bazelrc
