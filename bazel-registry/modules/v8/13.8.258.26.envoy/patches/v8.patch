diff --git a/BUILD.bazel b/BUILD.bazel
index 3f5a87d0..3fc44e29 100644
--- a/BUILD.bazel
+++ b/BUILD.bazel
@@ -292,7 +292,7 @@ v8_int(
 # If no explicit value for v8_enable_pointer_compression, we set it to 'none'.
 v8_string(
     name = "v8_enable_pointer_compression",
-    default = "none",
+    default = "False",
 )
 
 # Default setting for v8_enable_pointer_compression.
@@ -4437,10 +4437,10 @@ v8_library(
         ":noicu/generated_torque_definitions",
     ],
     deps = [
-        ":lib_dragonbox",
-        "//third_party/fast_float/src:fast_float",
-        ":lib_fp16",
-        ":simdutf",
+        "@dragonbox",
+        "@fast_float",
+        "@fp16",
+        "@simdutf",
         ":v8_libbase",
         "@abseil-cpp//absl/container:btree",
         "@abseil-cpp//absl/container:flat_hash_map",
@@ -4477,12 +4477,7 @@ v8_library(
     copts = ["-Wno-implicit-fallthrough"],
     strip_include_prefix = "third_party",
     visibility = ["//visibility:public"],
-    deps = [":noicu/v8"] + select({
-        ":is_v8_enable_vtunejit": [
-            ":v8_vtune",
-        ],
-        "//conditions:default": [],
-    }),
+    deps = [":noicu/v8"],
 )
 
 alias(
diff --git a/bazel/config/BUILD.bazel b/bazel/config/BUILD.bazel
index c81f2782..e5813ea4 100644
--- a/bazel/config/BUILD.bazel
+++ b/bazel/config/BUILD.bazel
@@ -3,6 +3,7 @@
 # found in the LICENSE file.
 
 load("@bazel_skylib//lib:selects.bzl", "selects")
+load("@bazel_skylib//rules:common_settings.bzl", "bool_flag")
 load(
     ":v8-target-cpu.bzl",
     "v8_configure_target_cpu",
@@ -357,3 +358,15 @@ selects.config_setting_group(
         ":is_fastbuild",
     ],
 )
+
+bool_flag(
+    name = "no_debug_info",
+    build_setting_default = True,
+)
+
+config_setting(
+    name = "debug_info_enabled",
+    flag_values = {
+        ":no_debug_info": "False",
+    },
+)
diff --git a/bazel/defs.bzl b/bazel/defs.bzl
index 0539ea17..c62d41f5 100644
--- a/bazel/defs.bzl
+++ b/bazel/defs.bzl
@@ -106,7 +106,7 @@ def _default_args():
             "@v8//bazel/config:is_posix": [
                 "-fPIC",
                 "-fno-strict-aliasing",
-                "-Werror",
+                "-Wno-error", # Envoy build should not fail for warnings in dependencies
                 "-Wextra",
                 "-Wno-unneeded-internal-declaration",
                 "-Wno-unknown-warning-option", # b/330781959
@@ -117,6 +117,9 @@ def _default_args():
                 "-Wno-implicit-int-float-conversion",
                 "-Wno-deprecated-copy",
                 "-Wno-non-virtual-dtor",
+                "-Wno-invalid-offsetof",
+                "-Wno-dangling-pointer",
+                "-Wno-dangling-reference",
                 "-isystem .",
             ],
             "//conditions:default": [],
@@ -141,6 +144,7 @@ def _default_args():
                 "-Wno-return-type",
                 "-Wno-stringop-overflow",
                 "-Wno-deprecated-this-capture",
+                "-flax-vector-conversions", # for GCC builds on ARM
                 # Use GNU dialect, because GCC doesn't allow using
                 # ##__VA_ARGS__ when in standards-conforming mode.
                 "-std=gnu++2a",
@@ -177,10 +181,25 @@ def _default_args():
                 "Advapi32.lib",
             ],
             "@v8//bazel/config:is_macos": ["-pthread"],
-            "//conditions:default": ["-Wl,--no-as-needed -ldl -latomic -pthread"],
+            "//conditions:default": ["-Wl,--no-as-needed -ldl -pthread"],
         }) + select({
             ":should_add_rdynamic": ["-rdynamic"],
             "//conditions:default": [],
+        }) + select({
+            "@v8//bazel/config:debug_info_enabled": [],
+            "//conditions:default": ["-g0"],
+        }) + select({
+            "@v8//bazel/config:is_macos": [
+                # The clang available on macOS catalina has a warning that isn't clean on v8 code.
+                "-Wno-range-loop-analysis",
+
+                # To supress warning on deprecated declaration on v8 code. For example:
+                # external/v8/src/base/platform/platform-darwin.cc:56:22: 'getsectdatafromheader_64'
+                # is deprecated: first deprecated in macOS 13.0.
+                # https://bugs.chromium.org/p/v8/issues/detail?id=13428.
+                "-Wno-deprecated-declarations",
+            ],
+            "//conditions:default": [],
         }),
     )
 
diff --git a/src/builtins/builtins-typed-array.cc b/src/builtins/builtins-typed-array.cc
index 918cb873..3fd946a8 100644
--- a/src/builtins/builtins-typed-array.cc
+++ b/src/builtins/builtins-typed-array.cc
@@ -12,7 +12,7 @@
 #include "src/objects/js-array-buffer-inl.h"
 #include "src/objects/objects-inl.h"
 #include "src/objects/simd.h"
-#include "third_party/simdutf/simdutf.h"
+#include "simdutf.h"
 
 namespace v8 {
 namespace internal {
@@ -520,17 +520,21 @@ simdutf::result ArrayBufferSetFromBase64(
     DirectHandle<JSTypedArray> typed_array, size_t& output_length) {
   output_length = array_length;
   simdutf::result simd_result;
+#ifdef WANT_ATOMIC_REF
   if (typed_array->buffer()->is_shared()) {
     simd_result = simdutf::atomic_base64_to_binary_safe(
         reinterpret_cast<const T>(input_vector), input_length,
         reinterpret_cast<char*>(typed_array->DataPtr()), output_length,
         alphabet, last_chunk_handling, /*decode_up_to_bad_char*/ true);
   } else {
+#endif
     simd_result = simdutf::base64_to_binary_safe(
         reinterpret_cast<const T>(input_vector), input_length,
         reinterpret_cast<char*>(typed_array->DataPtr()), output_length,
         alphabet, last_chunk_handling, /*decode_up_to_bad_char*/ true);
+#ifdef WANT_ATOMIC_REF
   }
+#endif
 
   return simd_result;
 }
@@ -833,15 +837,19 @@ BUILTIN(Uint8ArrayPrototypeToBase64) {
     // 11. Return CodePointsToString(outAscii).
 
     size_t simd_result_size;
+#ifdef WANT_ATOMIC_REF
     if (uint8array->buffer()->is_shared()) {
       simd_result_size = simdutf::atomic_binary_to_base64(
           std::bit_cast<const char*>(uint8array->DataPtr()), length,
           reinterpret_cast<char*>(output->GetChars(no_gc)), alphabet);
     } else {
+#endif
       simd_result_size = simdutf::binary_to_base64(
           std::bit_cast<const char*>(uint8array->DataPtr()), length,
           reinterpret_cast<char*>(output->GetChars(no_gc)), alphabet);
+#ifdef WANT_ATOMIC_REF
     }
+#endif
     DCHECK_EQ(simd_result_size, output_length);
     USE(simd_result_size);
   }
diff --git a/src/codegen/external-reference.cc b/src/codegen/external-reference.cc
index 14361351..0d703996 100644
--- a/src/codegen/external-reference.cc
+++ b/src/codegen/external-reference.cc
@@ -43,7 +43,7 @@
 #include "src/regexp/regexp-stack.h"
 #include "src/strings/string-search.h"
 #include "src/strings/unicode-inl.h"
-#include "third_party/fp16/src/include/fp16.h"
+#include "fp16.h"
 
 #if V8_ENABLE_WEBASSEMBLY
 #include "src/wasm/wasm-external-refs.h"
diff --git a/src/diagnostics/objects-printer.cc b/src/diagnostics/objects-printer.cc
index dd051ef2..21081b11 100644
--- a/src/diagnostics/objects-printer.cc
+++ b/src/diagnostics/objects-printer.cc
@@ -37,7 +37,7 @@
 #include "src/snapshot/embedded/embedded-data.h"
 #include "src/strings/string-stream.h"
 #include "src/utils/ostreams.h"
-#include "third_party/fp16/src/include/fp16.h"
+#include "fp16.h"
 
 #if V8_ENABLE_WEBASSEMBLY
 #include "src/debug/debug-wasm-objects-inl.h"
diff --git a/src/execution/arm64/simulator-logic-arm64.cc b/src/execution/arm64/simulator-logic-arm64.cc
index 6a58cce4..131fd65f 100644
--- a/src/execution/arm64/simulator-logic-arm64.cc
+++ b/src/execution/arm64/simulator-logic-arm64.cc
@@ -9,7 +9,7 @@
 #include <cmath>
 
 #include "src/numbers/conversions-inl.h"
-#include "third_party/fp16/src/include/fp16.h"
+#include "fp16.h"
 
 namespace v8 {
 namespace internal {
diff --git a/src/numbers/conversions.cc b/src/numbers/conversions.cc
index 1eec37da..9ddf25e0 100644
--- a/src/numbers/conversions.cc
+++ b/src/numbers/conversions.cc
@@ -23,9 +23,9 @@
 #include "src/objects/string-inl.h"
 #include "src/strings/char-predicates-inl.h"
 #include "src/utils/allocation.h"
-#include "third_party/dragonbox/src/include/dragonbox/dragonbox.h"
-#include "third_party/fast_float/src/include/fast_float/fast_float.h"
-#include "third_party/fast_float/src/include/fast_float/float_common.h"
+#include "dragonbox/dragonbox.h"
+#include "fast_float/fast_float.h"
+#include "fast_float/float_common.h"
 
 #if defined(_STLP_VENDOR_CSTD)
 // STLPort doesn't import fpclassify into the std namespace.
diff --git a/src/objects/elements.cc b/src/objects/elements.cc
index 7adcd81d..88a4f2da 100644
--- a/src/objects/elements.cc
+++ b/src/objects/elements.cc
@@ -25,7 +25,7 @@
 #include "src/objects/slots-atomic-inl.h"
 #include "src/objects/slots.h"
 #include "src/utils/utils.h"
-#include "third_party/fp16/src/include/fp16.h"
+#include "fp16.h"
 
 // Each concrete ElementsAccessor can handle exactly one ElementsKind,
 // several abstract ElementsAccessor classes are used to allow sharing
diff --git a/src/objects/simd.cc b/src/objects/simd.cc
index 0ef570ce..9217fa76 100644
--- a/src/objects/simd.cc
+++ b/src/objects/simd.cc
@@ -477,6 +477,7 @@ void Uint8ArrayToHexSlow(const char* bytes, size_t length,
   }
 }
 
+#ifdef WANT_ATOMIC_REF
 void AtomicUint8ArrayToHexSlow(const char* bytes, size_t length,
                                DirectHandle<SeqOneByteString> string_output) {
   int index = 0;
@@ -492,6 +493,7 @@ void AtomicUint8ArrayToHexSlow(const char* bytes, size_t length,
     index += 2;
   }
 }
+#endif
 
 inline uint16_t ByteToHex(uint8_t byte) {
   const uint16_t correction = (('a' - '0' - 10) << 8) + ('a' - '0' - 10);
@@ -645,11 +647,15 @@ Tagged<Object> Uint8ArrayToHex(const char* bytes, size_t length, bool is_shared,
   }
 #endif
 
+#ifdef WANT_ATOMIC_REF
   if (is_shared) {
     AtomicUint8ArrayToHexSlow(bytes, length, string_output);
   } else {
+#endif
     Uint8ArrayToHexSlow(bytes, length, string_output);
+#ifdef WANT_ATOMIC_REF
   }
+#endif
   return *string_output;
 }
 
@@ -1082,12 +1088,16 @@ bool ArrayBufferFromHex(const base::Vector<T>& input_vector, bool is_shared,
   for (uint32_t i = 0; i < output_length * 2; i += 2) {
     result = HandleRemainingHexValues(input_vector, i);
     if (result.has_value()) {
+#ifdef WANT_ATOMIC_REF
       if (is_shared) {
         std::atomic_ref<uint8_t>(buffer[index++])
             .store(result.value(), std::memory_order_relaxed);
       } else {
+#endif
         buffer[index++] = result.value();
+#ifdef WANT_ATOMIC_REF
       }
+#endif
     } else {
       return false;
     }
diff --git a/src/objects/string-inl.h b/src/objects/string-inl.h
index 3056a07d..3578e43f 100644
--- a/src/objects/string-inl.h
+++ b/src/objects/string-inl.h
@@ -38,7 +38,7 @@
 #include "src/torque/runtime-macro-shims.h"
 #include "src/torque/runtime-support.h"
 #include "src/utils/utils.h"
-#include "third_party/simdutf/simdutf.h"
+#include "simdutf.h"
 
 // Has to be the last include (doesn't have include guards):
 #include "src/objects/object-macros.h"
diff --git a/src/objects/string.h b/src/objects/string.h
index 77fbde31..0ab2a1e6 100644
--- a/src/objects/string.h
+++ b/src/objects/string.h
@@ -21,7 +21,7 @@
 #include "src/objects/tagged.h"
 #include "src/sandbox/external-pointer.h"
 #include "src/strings/unicode-decoder.h"
-#include "third_party/simdutf/simdutf.h"
+#include "simdutf.h"
 
 // Has to be the last include (doesn't have include guards):
 #include "src/objects/object-macros.h"
diff --git a/src/runtime/runtime-typedarray.cc b/src/runtime/runtime-typedarray.cc
index 6a01f136..b9978708 100644
--- a/src/runtime/runtime-typedarray.cc
+++ b/src/runtime/runtime-typedarray.cc
@@ -11,7 +11,7 @@
 #include "src/objects/objects-inl.h"
 #include "src/runtime/runtime-utils.h"
 #include "src/runtime/runtime.h"
-#include "third_party/fp16/src/include/fp16.h"
+#include "fp16.h"
 
 namespace v8 {
 namespace internal {
diff --git a/src/strings/unicode-inl.h b/src/strings/unicode-inl.h
index b210e18e..8dc29f2e 100644
--- a/src/strings/unicode-inl.h
+++ b/src/strings/unicode-inl.h
@@ -10,7 +10,7 @@
 
 #include "src/base/logging.h"
 #include "src/utils/utils.h"
-#include "third_party/simdutf/simdutf.h"
+#include "simdutf.h"
 
 namespace unibrow {
 
diff --git a/src/strings/unicode.cc b/src/strings/unicode.cc
index 3f318556..75b86513 100644
--- a/src/strings/unicode.cc
+++ b/src/strings/unicode.cc
@@ -21,7 +21,7 @@
 #include "unicode/uchar.h"
 #endif
 
-#include "third_party/simdutf/simdutf.h"
+#include "simdutf.h"
 
 namespace unibrow {
 
diff --git a/src/wasm/c-api.cc b/src/wasm/c-api.cc
index 05e4029f..d705be96 100644
--- a/src/wasm/c-api.cc
+++ b/src/wasm/c-api.cc
@@ -2472,6 +2472,8 @@ WASM_EXPORT auto Instance::exports() const -> ownvec<Extern> {
 
 }  // namespace wasm
 
+#if 0
+
 // BEGIN FILE wasm-c.cc
 
 extern "C" {
@@ -3518,3 +3520,5 @@ wasm_instance_t* wasm_frame_instance(const wasm_frame_t* frame) {
 #undef WASM_DEFINE_SHARABLE_REF
 
 }  // extern "C"
+
+#endif
diff --git a/src/wasm/float16.h b/src/wasm/float16.h
index 5c0e0a90..0b9ede60 100644
--- a/src/wasm/float16.h
+++ b/src/wasm/float16.h
@@ -6,7 +6,7 @@
 #define V8_WASM_FLOAT16_H_
 
 #include "src/base/memory.h"
-#include "third_party/fp16/src/include/fp16.h"
+#include "fp16.h"
 
 namespace v8 {
 namespace internal {
diff --git a/src/wasm/wasm-objects-inl.h b/src/wasm/wasm-objects-inl.h
index 67570c99..f2849c38 100644
--- a/src/wasm/wasm-objects-inl.h
+++ b/src/wasm/wasm-objects-inl.h
@@ -29,7 +29,7 @@
 #include "src/roots/roots.h"
 #include "src/wasm/wasm-code-manager.h"
 #include "src/wasm/wasm-module.h"
-#include "third_party/fp16/src/include/fp16.h"
+#include "fp16.h"
 
 #if V8_ENABLE_DRUMBRAKE
 #include "src/wasm/interpreter/wasm-interpreter-objects.h"
diff --git a/src/wasm/wasm-value.h b/src/wasm/wasm-value.h
index 0376d778..2ced1c12 100644
--- a/src/wasm/wasm-value.h
+++ b/src/wasm/wasm-value.h
@@ -14,7 +14,7 @@
 #include "src/handles/handles.h"
 #include "src/utils/boxed-float.h"
 #include "src/wasm/value-type.h"
-#include "third_party/fp16/src/include/fp16.h"
+#include "fp16.h"
 
 namespace v8 {
 namespace internal {
