
inputs:
  url:
    type: string
    required: true
  variant:
    type: string
    required: true
  image:
    type: string
    default: envoyproxy/envoy


runs:
  using: "composite"
  steps:
  - uses: envoyproxy/toolshed/gh-actions/fetch@e0f55edab5d5eca4c2e4547d374f32cb7cf7b341  # actions-v0.2.25
    id: fetch
    with:
      url: ${{ inputs.url }}
  - run: |
      echo "Copy oci image: oci-archive:${{ steps.fetch.outputs.path }} docker-daemon:${{ inputs.image }}:${{ inputs.variant }}"
      skopeo copy -q "oci-archive:${{ steps.fetch.outputs.path }}" "docker-daemon:${{ inputs.image }}:${{ inputs.variant }}"
      rm ${{ steps.fetch.outputs.path }}
    shell: bash
