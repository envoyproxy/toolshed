
inputs:
  name:
    type: string
    default: env
  env:
    type: string
    required: true


runs:
  using: composite
  steps:
  - uses: envoyproxy/toolshed/gh-actions/jq@actions-v0.1.36
    name: Print check proxy data
    with:
      input: ${{ inputs.env }}
      options: -C
      print-result: true
  - name: Save environment data
    id: save
    shell: bash
    run: |
      OUTPUT_DIR=$(mktemp -d)
      printf "%s" "$INPUT_ENV"  >> "$OUTPUT_DIR/${{ inputs.name }}.json"
      echo "directory=${OUTPUT_DIR}" >> $GITHUB_OUTPUT
    env:
      INPUT_ENV: ${{ inputs.env }}
  - name: Upload environment data
    uses: actions/upload-artifact@v3
    with:
      name: ${{ inputs.name }}
      path: ${{ steps.save.outputs.directory }}
