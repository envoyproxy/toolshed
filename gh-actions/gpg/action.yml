inputs:
  debug:
    type: boolean
    default: false
  gpg-key:
    type: string
    default:
  gpg-password:
    type: string
    default:
  passphrase-path:
    type: string
  configured-passphrase-path:
    type: string

outputs:
  fingerprint:
    value: >-
      ${{ steps.gpg-import.outputs.fingerprint || steps.gpg.outputs.fingerprint }}
  passphrase:
    value: >-
      ${{ steps.gpg-import.outputs.passphrase || steps.gpg.outputs.passphrase }}


runs:
  using: "composite"
  steps:
  - name: Generate GPG key
    id: gpg
    if: >-
      inputs.gpg-key == ''
    uses: envoyproxy/toolshed/gh-actions/gpg/generate@f9c50a148da1c38264ea2a12293104fd18709b77
    with:
      debug: ${{ inputs.debug }}
  - name: Import GPG key
    id: gpg-import
    if: >-
      inputs.gpg-key != ''
    uses: envoyproxy/toolshed/gh-actions/gpg/import@f9c50a148da1c38264ea2a12293104fd18709b77
    with:
      key: ${{ inputs.gpg-key }}
      passphrase: ${{ inputs.gpg-password }}
      passphrase-path: ${{ inputs.passphrase-path }}
      configured-passphrase-path: ${{ inputs.configured-passphrase-path }}
