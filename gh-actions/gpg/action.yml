inputs:
  debug:
    type: boolean
    default: false
  gpg-key:
    type: string
    default:
  gpg-password:
    type: string
    default:

outputs:
  fingerprint:
    value: >-
      ${{ steps.gpg-import.outputs.fingerprint || steps.gpg.outputs.fingerprint }}
  passphrase:
    value: >-
      ${{ steps.gpg-import.outputs.passphrase || steps.gpg.outputs.passphrase }}


runs:
  using: "composite"
  steps:
  - name: Generate GPG key
    id: gpg
    if: >-
      inputs.gpg-key == ''
    uses: envoyproxy/toolshed/gh-actions/gpg/generate@0e9dfeeadc98496f24f75110100badc0de1a236b
    with:
      debug: ${{ inputs.debug }}
  - name: Import GPG key
    id: gpg-import
    if: >-
      inputs.gpg-key != ''
    uses: envoyproxy/toolshed/gh-actions/gpg/import@0e9dfeeadc98496f24f75110100badc0de1a236b
    with:
      key: ${{ inputs.gpg-key }}
      passphrase: ${{ inputs.gpg-password }}
