uses: ./gh-actions/version
id: version
with:
  version-file: /tmp/custom-version.txt

before:
- shell: bash
  run: |
    echo "3.14.159" > /tmp/custom-version.txt

after:
- shell: bash
  run: |
    VERSION_OUTPUT='${{ steps.version.outputs.version }}'
    if [[ -z "$VERSION_OUTPUT" ]]; then
        echo "✗ Error: Version output is empty"
        exit 1
    fi
    echo "✓ Version output: $VERSION_OUTPUT"
    
    VERSION_VALUE=$(echo "$VERSION_OUTPUT" | jq -r '.version')
    IS_DEV=$(echo "$VERSION_OUTPUT" | jq -r '.is_dev')
    
    if [[ "$VERSION_VALUE" != "3.14.159" ]]; then
        echo "✗ Error: Expected version '3.14.159', got '$VERSION_VALUE'"
        exit 1
    fi
    echo "✓ Version value is correct: $VERSION_VALUE"
    
    if [[ "$IS_DEV" != "false" ]]; then
        echo "✗ Error: Expected is_dev 'false', got '$IS_DEV'"
        exit 1
    fi
    echo "✓ is_dev flag is correct: $IS_DEV"
    
    rm -f /tmp/custom-version.txt
    echo "✓ Custom version file test passed"
