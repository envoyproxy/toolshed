
inputs:
  steps:
    type: string
    required: true
  name:
    default:

runs:
  using: composite
  steps:
  - id: create-steps
    shell: bash
    # This allows latebinding using `%{{ }}`
    # For example, to use output from a previous step you can use
    # %{{ steps.stepname.outputs }}
    run: |
      ACTION_PATH='${{ github.action_path }}'
      if [[ ${{ runner.os  }} == "Windows" ]]; then
          ACTION_PATH=$(echo $ACTION_PATH | tr '/' '\\')
      fi
      ls -alh "${ACTION_PATH}/create-steps.sh"
      "${ACTION_PATH}/create-steps.sh"
    env:
      STEPS: ${{ inputs.steps }}
  - name: Run (${{ inputs.name || '.tmp.action' }})
    uses: ./.tmp.action
  - name: Cleanup (.tmp.action)
    if: always()
    shell: bash
    run: rm -rf .tmp.action
